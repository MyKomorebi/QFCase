using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using QFramework;
using ProjectSurvivor;
using System.Linq;

public class ExpUpgradeSystem : AbstractSystem
{

    public List<ExpUpgradeItem> Items { get; } = new List<ExpUpgradeItem>();
    public static bool AllUnlockedFinish=false;

    public static void CheckAllUnlockFinish()
    {
        AllUnlockedFinish = Global.Interface.GetSystem<ExpUpgradeSystem>().Items
            .All(i => i.UpgradeFinish);
    }

    public Dictionary<string, ExpUpgradeItem> Dictionary = new ();
    public Dictionary<string, string> Pairs = new Dictionary<string, string>()
        {
            { "simple_sword", "simple_critical" },
            { "simple_bomb", "simple_fly_count" },
            { "simple_knife", "damage_rate" },
            { "basket_ball", "movement_speed_rate" },
            { "rotate_sword", "simple_exp" },

            { "simple_critical", "simple_sword" },
            { "simple_fly_count", "simple_bomb" },
            { "damage_rate", "simple_knife" },
            { "movement_speed_rate", "basket_ball" },
            { "simple_exp", "rotate_sword" },
        };

    public Dictionary<string, BindableProperty<bool>>PairedProperties =
           new()
           {
                { "simple_sword", Global.SuperSword },
                { "simple_bomb", Global.SuperBomb },
                { "simple_knife", Global.SuperKnife },
                { "basket_ball", Global.SuperBasketBall },
                { "rotate_sword", Global.SuperRotateSword },

               // simple_exp
               // simple_collectable_area
           };
    public ExpUpgradeItem Add(ExpUpgradeItem item)
    {
        Items.Add(item);
        return item;
    }
    protected override void OnInit()
    {
        ResetData();

        Global.Level.Register(_ =>
        {
            
            Roll();
        });
    }

    public void ResetData()
    {
        Items.Clear();
        Add(new ExpUpgradeItem(true))
            .WithKey("simple_sword")
              .WithName("½£")
                .WithIconName("simple_sword_icon")
                .WithPairedName("ºÏ³ÉºóµÄ½£")
                .WithPairedIconName("paired_simple_sword_icon")
                .WithPairedDescription("¹¥»÷Á¦·­±¶ ¹¥»÷·¶Î§·­±¶")
            .WithDescription(lv =>
            {
                return lv switch
                {
                    1 => $"½£Lv{lv}:¹¥»÷Éí±ßµÄµÐÈË",
                    2 => $"½£Lv{lv}:\n¹¥»÷Á¦+3£¬ÊýÁ¿+2",
                    3 => $"½£Lv{lv}:\n¹¥»÷Á¦+2£¬¼ä¸ô-0.25s",
                    4 => $"½£Lv{lv}:\n¹¥»÷Á¦+2£¬¼ä¸ô-0.25s",
                    5 => $"½£Lv{lv}:\n¹¥»÷Á¦+3£¬ÊýÁ¿+2",
                    6 => $"½£Lv{lv}:\n·¶Î§+1£¬¼ä¸ô-0.25s",
                    7 => $"½£Lv{lv}:\n¹¥»÷Á¦+3£¬ÊýÁ¿+2",
                    8 => $"½£Lv{lv}:\n¹¥»÷Á¦+2£¬·¶Î§+1",
                    9 => $"½£Lv{lv}:\n¹¥»÷Á¦+3£¬¼ä¸ô-0.25s",
                    10 => $"½£Lv{lv}\n¹¥»÷Á¦+3£¬ÊýÁ¿+2",
                    _ => null
                };
            })
            .WithMaxLevel(10)
            .OnUpgrade((_, level) =>
            {
                switch (level)
                {
                    case 1:
                        Global.SimpleSwordUnlocked.Value = true;
                        break;
                    case 2:
                        Global.SimpleAbillityDamage.Value += 3;
                        Global.SimpleSwordCount.Value += 2;
                        break;
                    case 3:
                        Global.SimpleAbillityDamage.Value += 2;
                        Global.SimpleAbillityDuration.Value -= 0.25f;
                        break;
                    case 4:
                        Global.SimpleAbillityDamage.Value += 2;
                        Global.SimpleAbillityDuration.Value -= 0.25f;
                        break;
                    case 5:
                        Global.SimpleAbillityDamage.Value += 3;
                        Global.SimpleSwordCount.Value += 2;
                        break;
                    case 6:
                        Global.SimpleSwordRange.Value++;
                        Global.SimpleAbillityDuration.Value -= 0.25f;
                        break;
                    case 7:
                        Global.SimpleAbillityDamage.Value += 3;
                        Global.SimpleSwordCount.Value += 2;
                        break;
                    case 8:
                        Global.SimpleAbillityDamage.Value += 2;
                        Global.SimpleSwordRange.Value++;
                        break;
                    case 9:
                        Global.SimpleAbillityDamage.Value += 3;
                        Global.SimpleAbillityDuration.Value -= 0.25f;
                        break;
                    case 10:
                        Global.SimpleAbillityDamage.Value += 3;
                        Global.SimpleSwordCount.Value += 2;
                        break;

                }
            });

       Add(new ExpUpgradeItem(true))
             .WithKey("rotate_sword")
              .WithName("ÊØÎÀ½£")
                .WithIconName("rotate_sword_icon")
                .WithPairedName("ºÏ³ÉºóµÄÊØÎÀ½£")
                .WithPairedIconName("paired_rotate_sword_icon")
                .WithPairedDescription("¹¥»÷Á¦·­±¶ Ðý×ªËÙ¶È·­±¶")
              .WithMaxLevel(10)
            .WithDescription(lv =>
            {
                return lv switch
                {
                    1 => $"ÊØÎÀ½£Lv{lv}: \n»·ÈÆÖ÷½ÇÉí±ßµÄ½£",
                    2 => $"ÊØÎÀ½£Lv{lv}: \nÊýÁ¿ + 1 ¹¥»÷Á¦ + 1",
                    3 => $"ÊØÎÀ½£Lv{lv}: \n¹¥»÷Á¦ + 2 ËÙ¶È+25%",
                    4 => $"ÊØÎÀ½£Lv{lv}: \nËÙ¶È+50%",
                    5 => $"ÊØÎÀ½£Lv{lv}: \nÊýÁ¿ + 1 ¹¥»÷Á¦ + 1",
                    6 => $"ÊØÎÀ½£Lv{lv}: \n¹¥»÷Á¦ + 2 ËÙ¶È+25%",
                    7 => $"ÊØÎÀ½£Lv{lv}: \nÊýÁ¿ + 1 ¹¥»÷Á¦ + 1",
                    8 => $"ÊØÎÀ½£Lv{lv}: \n¹¥»÷Á¦ + 2 ËÙ¶È+25%",
                    9 => $"ÊØÎÀ½£Lv{lv}: \nÊýÁ¿ + 1 ¹¥»÷Á¦ + 1",
                    10 => $"ÊØÎÀ½£Lv{lv}: \n¹¥»÷Á¦ + 2 ËÙ¶È+25%",
                    _ => null
                };
            })
           
            .OnUpgrade((_, level) =>
            {
                switch (level)
                {
                    case 1:
                        Global.RotateSwordUnlocked.Value = true;
                        break;
                    case 2:
                        Global.RotateSwordCount.Value++;
                        Global.RotateSwordDamage.Value++;
                        break;
                    case 3:
                        Global.RotateSwordDamage.Value++;
                        Global.RotateSwordDamage.Value++;
                        Global.RotateSwordSpeed.Value *= 1.25f;
                        break;
                    case 4:
                        Global.RotateSwordSpeed.Value *= 1.5f;
                        break;
                    case 5:
                        Global.RotateSwordCount.Value++;
                        Global.RotateSwordDamage.Value++;
                        break;
                    case 6:
                        Global.RotateSwordDamage.Value++;
                        Global.RotateSwordDamage.Value++;
                        Global.RotateSwordSpeed.Value *= 1.25f;
                        break;
                    case 7:
                        Global.RotateSwordCount.Value++;
                        Global.RotateSwordDamage.Value++;
                        break;
                    case 8:
                        Global.RotateSwordDamage.Value++;
                        Global.RotateSwordDamage.Value++;
                        Global.RotateSwordSpeed.Value *= 1.25f;
                        break;
                    case 9:
                        Global.RotateSwordCount.Value++;
                        Global.RotateSwordDamage.Value++;
                        break;
                    case 10:
                        Global.RotateSwordDamage.Value++;
                        Global.RotateSwordDamage.Value++;
                        Global.RotateSwordSpeed.Value *= 1.25f;
                        break;

                }
            });

        Add(new ExpUpgradeItem(false)
               .WithKey("simple_critical")
                .WithName("±©»÷")
                .WithIconName("critical_icon")
               .WithMaxLevel(5)
               .WithDescription(lv =>
               {
                   return lv switch
                   {
                       1 => $"±©»÷Lv{lv}:\nÃ¿´ÎÉËº¦ 15% ¸ÅÂÊ±©»÷",
                       2 => $"±©»÷Lv{lv}:\nÃ¿´ÎÉËº¦ 28% ¸ÅÂÊ±©»÷",
                       3 => $"±©»÷Lv{lv}:\nÃ¿´ÎÉËº¦ 43% ¸ÅÂÊ±©»÷",
                       4 => $"±©»÷Lv{lv}:\nÃ¿´ÎÉËº¦ 50% ¸ÅÂÊ±©»÷",
                       5 => $"±©»÷Lv{lv}:\nÃ¿´ÎÉËº¦ 80% ¸ÅÂÊ±©»÷",
                       _ => null
                   };
               })
               .OnUpgrade((_, lv) =>
               {
                   switch (lv)
                   {
                       case 1:
                           Global.CriticalRate.Value = 0.15f;
                           break;
                       case 2:
                           Global.CriticalRate.Value = 0.28f;
                           break;
                       case 3:
                           Global.CriticalRate.Value = 0.43f;
                           break;
                       case 4:
                           Global.CriticalRate.Value = 0.5f;
                           break;
                       case 5:
                           Global.CriticalRate.Value = 0.8f;
                           break;
                   }
               }));
        Add(new ExpUpgradeItem(false)
                .WithKey("damage_rate")
                 .WithName("ÉËº¦ÂÊ")
                .WithIconName("damage_icon")
                .WithMaxLevel(5)
                .WithDescription(lv =>
                {
                    return lv switch
                    {
                        1 => $"ÉËº¦ÂÊLv{lv}:\nÔö¼Ó 20% ¶îÍâÉËº¦",
                        2 => $"ÉËº¦ÂÊLv{lv}:\nÔö¼Ó 40% ¶îÍâÉËº¦",
                        3 => $"ÉËº¦ÂÊLv{lv}:\nÔö¼Ó 60% ¶îÍâÉËº¦",
                        4 => $"ÉËº¦ÂÊLv{lv}:\nÔö¼Ó 80% ¶îÍâÉËº¦",
                        5 => $"ÉËº¦ÂÊLv{lv}:\nÔö¼Ó 100% ¶îÍâÉËº¦",

                        _ => null
                    };
                })
                .OnUpgrade((_, lv) =>
                {
                    switch (lv)
                    {
                        case 1:
                            Global.DamageRate.Value = 1.2f;
                            break;
                        case 2:
                            Global.DamageRate.Value = 1.4f;
                            break;
                        case 3:
                            Global.DamageRate.Value = 1.6f;
                            break;
                        case 4:
                            Global.DamageRate.Value = 1.8f;
                            break;
                        case 5:
                            Global.DamageRate.Value = 2f;
                            break;
                    }
                }));
        Add(new ExpUpgradeItem(false)
               .WithKey("simple_fly_count")
                .WithIconName("fly_icon")
                .WithName("·ÉÉäÎï")
               .WithMaxLevel(3)
               .WithDescription(lv =>
               {
                   return lv switch
                   {
                       1 => $"·ÉÉäÎïLv{lv}:\n¶îÍâÔö¼Ó 1 ¸ö·ÉÉäÎï",
                       2 => $"·ÉÉäÎïLv{lv}:\n¶îÍâÔö¼Ó 2 ¸ö·ÉÉäÎï",
                       3 => $"·ÉÉäÎïLv{lv}:\n¶îÍâÔö¼Ó 3 ¸ö·ÉÉäÎï",
                       _ => null
                   };
               })
               .OnUpgrade((_, lv) =>
               {
                   switch (lv)
                   {
                       case 1:
                           Global.AdditionalFlyThingCount.Value++;
                           break;
                       case 2:
                           Global.AdditionalFlyThingCount.Value++;
                           break;
                       case 3:
                           Global.AdditionalFlyThingCount.Value++;
                           break;
                   }
               }));
        Add(new ExpUpgradeItem(false)
               .WithKey("movement_speed_rate")
                .WithName("ÒÆ¶¯ËÙ¶È")
                .WithIconName("movement_icon")
               .WithMaxLevel(5)
               .WithDescription(lv =>
               {
                   return lv switch
                   {
                       1 => $"ÒÆ¶¯ËÙ¶ÈLv{lv}:\nÔö¼Ó 25% ÒÆ¶¯ËÙ¶È",
                       2 => $"ÒÆ¶¯ËÙ¶ÈLv{lv}:\nÔö¼Ó 50% ÒÆ¶¯ËÙ¶È",
                       3 => $"ÒÆ¶¯ËÙ¶ÈLv{lv}:\nÔö¼Ó 75% ÒÆ¶¯ËÙ¶È",
                       4 => $"ÒÆ¶¯ËÙ¶ÈLv{lv}:\nÔö¼Ó 100% ÒÆ¶¯ËÙ¶È",
                       5 => $"ÒÆ¶¯ËÙ¶ÈLv{lv}:\nÔö¼Ó 150% ÒÆ¶¯ËÙ¶È",

                       _ => null
                   };
               })
               .OnUpgrade((_, lv) =>
               {
                   switch (lv)
                   {
                       case 1:
                           Global.MovementSpeedRate.Value = 1.25f;
                           break;
                       case 2:
                           Global.MovementSpeedRate.Value = 1.5f;
                           break;
                       case 3:
                           Global.MovementSpeedRate.Value = 1.75f;
                           break;
                       case 4:
                           Global.MovementSpeedRate.Value = 2f;
                           break;
                       case 5:
                           Global.MovementSpeedRate.Value = 2.5f;
                           break;
                   }
               }));
        Add(new ExpUpgradeItem(false)
              .WithKey("simple_collectable_area")
              .WithName("Ê°È¡·¶Î§")
                .WithIconName("collectable_icon")
              .WithMaxLevel(3)
              .WithDescription(lv =>
              {
                  return lv switch
                  {
                      1 => $"Ê°È¡·¶Î§Lv{lv}:\n¶îÍâÔö¼Ó 100% ·¶Î§",
                      2 => $"Ê°È¡·¶Î§Lv{lv}:\n¶îÍâÔö¼Ó 200% ·¶Î§",
                      3 => $"Ê°È¡·¶Î§Lv{lv}:\n¶îÍâÔö¼Ó 300% ·¶Î§",
                      _ => null
                  };
              })
              .OnUpgrade((_, lv) =>
              {
                  switch (lv)
                  {
                      case 1:
                          Global.CollectableArea.Value = 2f;
                          break;
                      case 2:
                          Global.CollectableArea.Value = 3f;
                          break;
                      case 3:
                          Global.CollectableArea.Value = 4f;
                          break;
                  }
              }));
        Add(new ExpUpgradeItem(false)
              .WithKey("simple_exp")
              .WithName("¾­ÑéÖµ")
                .WithIconName("exp_icon")
              .WithMaxLevel(5)
              .WithDescription(lv =>
              {
                  return lv switch
                  {
                      1 => $"¾­ÑéÖµLv{lv}:\n¶îÍâÔö¼Ó 5% µôÂä¸ÅÂÊ",
                      2 => $"¾­ÑéÖµLv{lv}:\n¶îÍâÔö¼Ó 8% µôÂä¸ÅÂÊ",
                      3 => $"¾­ÑéÖµLv{lv}:\n¶îÍâÔö¼Ó 12% µôÂä¸ÅÂÊ",
                      4 => $"¾­ÑéÖµLv{lv}:\n¶îÍâÔö¼Ó 17% µôÂä¸ÅÂÊ",
                      5 => $"¾­ÑéÖµLv{lv}:\n¶îÍâÔö¼Ó 25% µôÂä¸ÅÂÊ",
                      _ => null
                  };
              })
              .OnUpgrade((_, lv) =>
              {
                  switch (lv)
                  {
                      case 1:
                          Global.AdditionalExpPercent.Value = 0.05f;
                          break;
                      case 2:
                          Global.AdditionalExpPercent.Value = 0.08f;
                          break;
                      case 3:
                          Global.AdditionalExpPercent.Value = 0.12f;
                          break;
                      case 4:
                          Global.AdditionalExpPercent.Value = 0.17f;
                          break;
                      case 5:
                          Global.AdditionalExpPercent.Value = 0.25f;
                          break;
                  }
              }));
        Add(new ExpUpgradeItem(false)
            .WithKey("simple_bomb")
            .WithMaxLevel(10)
            .WithDescription(lv =>
            {
                return lv switch
                {
                    1 => $"Õ¨µ¯Lv{lv}:\n¹¥»÷È«²¿µÐÈË(¹ÖÎïµôÂä)",
                    2 => $"Õ¨µ¯Lv{lv}:\nµôÂä¸ÅÂÊ+5% ¹¥»÷Á¦+5",
                    3 => $"Õ¨µ¯Lv{lv}:\nµôÂä¸ÅÂÊ+5% ¹¥»÷Á¦+5",
                    4 => $"Õ¨µ¯Lv{lv}:\nµôÂä¸ÅÂÊ+5% ¹¥»÷Á¦+5",
                    5 => $"Õ¨µ¯Lv{lv}:\nµôÂä¸ÅÂÊ+5% ¹¥»÷Á¦+5",
                    6 => $"Õ¨µ¯Lv{lv}:\nµôÂä¸ÅÂÊ+5% ¹¥»÷Á¦+5",
                    7 => $"Õ¨µ¯Lv{lv}:\nµôÂä¸ÅÂÊ+5% ¹¥»÷Á¦+5",
                    8 => $"Õ¨µ¯Lv{lv}:\nµôÂä¸ÅÂÊ+5% ¹¥»÷Á¦+5",
                    9 => $"Õ¨µ¯Lv{lv}:\nµôÂä¸ÅÂÊ+5% ¹¥»÷Á¦+5",
                    10 => $"Õ¨µ¯Lv{lv}:\nµôÂä¸ÅÂÊ+10% ¹¥»÷Á¦+5",
                    _ => null
                };
            })
            .OnUpgrade((_, level) =>
            {
                switch (level)
                {
                    case 1:
                        Global.BombUnlocked.Value = true;
                        break;
                    case 2:
                        Global.BombDamage.Value += 5;
                        Global.BombPercent.Value += 0.05f;
                        break;
                    case 3:
                        Global.BombDamage.Value += 5;
                        Global.BombPercent.Value += 0.05f;
                        break;
                    case 4:
                        Global.BombDamage.Value += 5;
                        Global.BombPercent.Value += 0.05f;
                        break;
                    case 5:
                        Global.BombDamage.Value += 5;
                        Global.BombPercent.Value += 0.05f;
                        break;
                    case 6:
                        Global.BombDamage.Value += 5;
                        Global.BombPercent.Value += 0.05f;
                        break;
                    case 7:
                        Global.BombDamage.Value += 5;
                        Global.BombPercent.Value += 0.05f;
                        break;
                    case 8:
                        Global.BombDamage.Value += 5;
                        Global.BombPercent.Value += 0.05f;
                        break;
                    case 9:
                        Global.BombDamage.Value += 5;
                        Global.BombPercent.Value += 0.05f;
                        break;
                    case 10:
                        Global.BombDamage.Value += 5;
                        Global.BombPercent.Value += 0.1f;
                        break;
                }
            })
        );

        Add(new ExpUpgradeItem(true))
            .WithKey("simple_knife")
            .WithName("·Éµ¶")
                .WithIconName("simple_knife_icon")
                .WithPairedName("ºÏ³ÉºóµÄ·Éµ¶")
                .WithPairedIconName("paired_simple_knife_icon")
                .WithPairedDescription("¹¥»÷Á¦·­±¶")
             .WithMaxLevel(10)
           .WithDescription(lv =>
           {
               return lv switch
               {
                   1 => $"·Éµ¶Lv{lv}:Ïò×î½üµÄµÐÈË·¢ÉäÒ»°Ñ·Éµ¶",
                   2 => $"·Éµ¶Lv{lv}:\n¹¥»÷Á¦+3£¬ÊýÁ¿+2",
                   3 => $"·Éµ¶Lv{lv}:\n¼ä¸ô-0.1s£¬¹¥»÷Á¦+1£¬ÊýÁ¿+1",
                   4 => $"·Éµ¶Lv{lv}:\n¼ä¸ô-0.1s£¬´©Í¸+1£¬ÊýÁ¿+1",
                   5 => $"·Éµ¶Lv{lv}:\n¹¥»÷Á¦+3£¬ÊýÁ¿+1",
                   6 => $"·Éµ¶Lv{lv}:\n¼ä¸ô-0.1s£¬ÊýÁ¿+1",
                   7 => $"·Éµ¶Lv{lv}:\n¼ä¸ô-0.1s£¬´©Í¸+1£¬ÊýÁ¿+1",
                   8 => $"·Éµ¶Lv{lv}:\n¹¥»÷Á¦+3£¬ÊýÁ¿+1",
                   9 => $"·Éµ¶Lv{lv}:\n¼ä¸ô-0.1s£¬ÊýÁ¿+1",
                   10 => $"·Éµ¶Lv{lv}\n¹¥»÷Á¦+3£¬ÊýÁ¿+1",
                   _ => null
               };
           })

           .OnUpgrade((_, level) =>
           {
               switch (level)
               {
                   case 1:
                       Global.SimpleKnifeUnlocked.Value = true;
                       break;
                   case 2:
                       Global.SimpleKinfeDamage.Value += 3;
                       Global.SimpleKinfeCount.Value += 2;
                       break;
                   case 3:
                       Global.SimpleKinfeDamage.Value += 2;
                       Global.SimpleKinfeDuration.Value -= 0.1f;
                       Global.SimpleKinfeCount.Value++;
                       break;
                   case 4:
                       Global.SimpleKinfeDuration.Value -= 0.1f;
                       Global.SimpleKinfeAttackCount.Value++;
                       Global.SimpleKinfeCount.Value++;
                       break;
                   case 5:
                       Global.SimpleKinfeDamage.Value += 3;
                       Global.SimpleKinfeCount.Value++;
                       break;
                   case 6:
                       Global.SimpleKinfeDuration.Value -= 0.1f;
                       Global.SimpleKinfeCount.Value++;
                       break;
                   case 7:
                       Global.SimpleKinfeDuration.Value -= 0.1f;
                       Global.SimpleKinfeAttackCount.Value++;
                       Global.SimpleKinfeCount.Value++;
                       break;
                   case 8:
                       Global.SimpleKinfeDamage.Value += 3;
                       Global.SimpleKinfeCount.Value++;
                       break;
                   case 9:
                       Global.SimpleKinfeDuration.Value -= 0.1f;
                       Global.SimpleKinfeCount.Value++;
                       break;
                   case 10:
                       Global.SimpleKinfeDamage.Value += 3;
                       Global.SimpleKinfeCount.Value++;
                       break;

               }
           });
        Add(new ExpUpgradeItem(true)
             .WithKey("basket_ball")
             .WithName("ÀºÇò")
                .WithIconName("ball_icon")
                .WithPairedName("ºÏ³ÉºóµÄÀºÇò")
                .WithPairedIconName("paired_ball_icon")
                .WithPairedDescription("¹¥»÷Á¦·­±¶ Ìå»ý±ä´ó")
             .WithMaxLevel(10)
             .WithDescription(lv =>
             {
                 return lv switch
                 {
                     1 => $"ÀºÇòLv{lv}:\nÔÚÆÁÄ»ÄÚ·´µ¯µÄÀºÇò",
                     2 => $"ÀºÇòLv{lv}:\n¹¥»÷Á¦+3",
                     3 => $"ÀºÇòLv{lv}:\nÊýÁ¿+1",
                     4 => $"ÀºÇòLv{lv}:\n¹¥»÷Á¦+3",
                     5 => $"ÀºÇòLv{lv}:\nÊýÁ¿+1",
                     6 => $"ÀºÇòLv{lv}:\n¹¥»÷Á¦+3",
                     7 => $"ÀºÇòLv{lv}:\nËÙ¶È+20%",
                     8 => $"ÀºÇòLv{lv}:\n¹¥»÷Á¦+3",
                     9 => $"ÀºÇòLv{lv}:\nËÙ¶È+20%",
                     10 => $"ÀºÇòLv{lv}:\nÊýÁ¿+1",
                     _ => null
                 };
             })
             .OnUpgrade((_, level) =>
             {
                 switch (level)
                 {
                     case 1:
                         Global.BasketBallUnlocked.Value = true;
                         break;
                     case 2:
                         Global.BasketBallDamage.Value += 3;
                         break;
                     case 3:
                         Global.BasketBallCount.Value++;
                         break;
                     case 4:
                         Global.BasketBallDamage.Value += 3;
                         break;
                     case 5:
                         Global.BasketBallCount.Value++;
                         break;
                     case 6:
                         Global.BasketBallDamage.Value += 3;
                         break;
                     case 7:
                         Global.BasketBallSpeed.Value *= 1.2f;
                         break;
                     case 8:
                         Global.BasketBallDamage.Value += 3;
                         break;
                     case 9:
                         Global.BasketBallSpeed.Value *= 1.2f;
                         break;
                     case 10:
                         Global.BasketBallCount.Value++;
                         break;
                 }
             }));
       
      
        Dictionary = Items.ToDictionary(i => i.Key);
        
    }
    public void Roll()
    {

        foreach(var expUpgradeItem in Items)
        {
            expUpgradeItem.Visible.Value = false;
        }
        
        var list= Items.Where(item => !item.UpgradeFinish).ToList();
        if (list.Count >= 4)
        {
           
            list.GetAndRemoveRandomItem().Visible.Value = true;
            list.GetAndRemoveRandomItem().Visible.Value = true;
            list.GetAndRemoveRandomItem().Visible.Value = true;
            list.GetAndRemoveRandomItem().Visible.Value = true;
        }
        else
        {
          
            foreach(var item in list)
            {
                item.Visible.Value = true;
            }
        }
       

       
    }
}
